\documentclass{beamer}

\usepackage[utf8]{inputenc}

\usepackage{fancyvrb}
\usepackage{hyperref}
\usepackage{xcolor}

\title[git]{git --- an introduction}
\subtitle{Learning to commit}
\author{LiTHe kod}
\date{2021}

\newcommand{\temporalgray}[2]{\temporal<#1>{\phantom{#2}}{#2}{\textcolor{gray}{#2}}}
\newcommand{\keyword}[1]{\hspace{-1.0em}\colorbox{black}{\textcolor{white}{\textbf{#1}\vphantom{Ep}}}\vspace{0.2em}} % yikes
\newcommand{\command}[1]{\texttt{\textcolor{gray}{\$} {#1}}}

\begin{document}

\frame{\titlepage}
\frame{\tableofcontents}

\logo{\vspace{-5.0em}\includegraphics[width=.06\textwidth]{watermark.png}\hspace*{.93\paperwidth}}

%TODO about us

\begin{frame}[fragile]
  \frametitle{LiTHe kod? Tell me more!}
  Your one stop shop for GameJams, comptetive programming, meetups and other coding related events.

  \vspace{2.0em}
  Applications are open for the 21/20 board! \\
  Mail questions to \texttt{ordf@lithekod.se} \\
\end{frame}

\section{Getting started}

\begin{frame}[fragile]
  \begin{center}
  \Huge \alert{DON'T\\PANIC}
  \end{center}
\end{frame}

\begin{frame}[fragile]
  \frametitle{What even is git?}
\end{frame}

\begin{frame}[fragile]
  \frametitle{What even is git? \dots and why is it better than email?}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Getting started -- Getting binaries}
  
  Windows: git BASH, \url{gitforwindows.org}\\
  MacOS: brew, \url{git-scm.com}\\
  Linux: Big-brain time\\

\end{frame}

\begin{frame}[fragile]
  \frametitle{Getting started -- Telling git who you are}

  Your name:\\
  \command{git config --global user.name "kodapa"} \\[1em]

  Your email:\\
  \command{git config --global user.email "kodapa@lithekod.se"} \\

\end{frame}

\begin{frame}[fragile]
  \frametitle{Getting started -- Getting your repository}
  \begin{tabular}{ll}
    \command{git clone} & \\
    \command{git init} & \\
  \end{tabular}
\end{frame}

\AtBeginSection[] % Do nothing for \section*
{
\begin{frame}<beamer>
\frametitle{Outline}
\tableofcontents[currentsection]
\end{frame}
}

\section{Basic commands}
\subsection{Getting to know the family}

% When/why to use them
% How to use them
% (Maybe) what you expect to happen

% Edvard
\begin{frame}[fragile]
  \frametitle{Getting to know the family}

  \begin{tabular}{ll}
    \command{git add} & I want to keep these! \\
    \command{git commit} & I did a thing! \\
    \command{git push} & I want to share this! \\ % mention pull
  \end{tabular}
  \\ [2.0em]

  \texttt{add}, \texttt{commit}, \texttt{push} and \texttt{pull}\textsuperscript{*}
  are the four horsemen of version control. The bread and butter.
  \\ [2.0em]

  \small \textsuperscript{*}\texttt{pull} will be discussed later.

\end{frame}

\begin{frame}
  \frametitle{Getting to know the family -- add}
  \keyword{When}\\
    You have made changes that you want to commit.
    Usually the first command in a series of commands.
  \vspace{0.5em}

  \keyword{How}\\
  \hspace{-1.0em}
  \begin{tabular}{ll}
    \command{git add hello.txt} & Stage the specified file \\
    \command{git add *.py} & Stage all python-files \\
    \command{git add -i} & Interactive prompt for adding \\
    \command{git add -p} & Add a part of a file \\
  \end{tabular}
  \vspace{0.5em}

  \keyword{Expect}\\
  Silence.
\end{frame}

\begin{frame}[fragile]
  \frametitle{Getting to know the family -- commit}
  \keyword{When}\\
    You have added a \emph{relevant} group of changes. Making
    the code ready for a new change. Preferably as small as possible.
  \vspace{0.5em}

  \keyword{How}\\
  \hspace{-1.0em}
  \begin{tabular}{ll}
    \command{git commit} & Commit the added file(s) \\
    \command{git commit --amend} & Update the previous commit \\
    \command{git commit -m "msg"} & Specify a message, skips the editor \\
  \end{tabular}
  \vspace{0.5em}

  \keyword{Expect}\\
  A texteditor pops up, where you write a descriptive commit message. And
  output similar to: \\
\begin{verbatim}
[master 3b65386] A descriptive message
1 file changed, 1 insertion(+)
\end{verbatim}

\end{frame}

\begin{frame}[fragile]
  \frametitle{Getting to know the family -- push}
  \keyword{When}\\
    After you've made commits you are happy with, or if the computer
    is about to blow up. If you haven't pushed, no one has to know what
    happened here.\\
  \vspace{0.5em}

  \keyword{How}\\
  \hspace{-1.0em}
  \begin{tabular}{ll}
    \command{git push} & Tell the server about your changes \\
  \end{tabular}
  \vspace{0.5em}

  \keyword{Expect}\\ [0.1em]
\begin{verbatim}
Enumerating objects: 1, done.
Counting objects: 100% (1/1), done.
Writing objects: 100% (1/1), 192 bytes | 192.00 KiB/s, done.
Total 1 (delta 0), reused 0 (delta 0), pack-reused 0
To github.com:kodapan/verkligt.git
   192c869..2ab0e3c  main -> main
\end{verbatim}
\end{frame}

\subsection{Commands for information}

% Gustav
\begin{frame}[fragile]
  \frametitle{Commands for information}

  \begin{tabular}{ll}
    \command{git status} & What is happening? \\
    \command{git diff} & What has changed? \\
    \command{git log} & What has happened? \\
    \command{git show} & What changed over there? \\
  \end{tabular}

\end{frame}

\begin{frame}
  \frametitle{Commands for information -- status}

  \keyword{When}\\
  Always! Guaranteed to not break anything.
  \vspace{0.5em}

  \keyword{How}\\
  \command{git status}
  \vspace{0.5em}

  \keyword{Expect}\\
  Some text explaining what's currently happening.
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- status}

\begin{verbatim}
$ git status
\end{verbatim}
\pause{}
\begin{verbatim}
On branch master
nothing to commit, working tree clean
\end{verbatim}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- status}

\begin{verbatim}
$ vim my_file.py
$ git status
\end{verbatim}
\pause{}
\vspace{-3.5ex}
\begin{verbatim}
On branch master
\end{verbatim}
\pause{}
\vspace{-3.5ex}
\begin{verbatim}
Changes not staged for commit:
\end{verbatim}
\pause{}
\vspace{-3.5ex}
\begin{verbatim}
  (use "git add <file>..." to update what will be
   commited)
\end{verbatim}
\pause{}
\vspace{-3.5ex}
\begin{verbatim}
  (use "git checkout -- <file>..." to discard changes
   in working directory)
\end{verbatim}
\pause{}
\vspace{-3.5ex}
\begin{verbatim}

        modified:   my_file.py
\end{verbatim}
\pause{}
\vspace{-3.5ex}
\begin{verbatim}

no changes added to commit (use "git add" and/or
                            "git commit -a")
\end{verbatim}
\end{frame}

\begin{frame}
  \frametitle{Commands for information -- diff}

  \keyword{When}\\
  You want to see the difference between two things. Very versatile.
  \vspace{0.5em}

  \keyword{How}\\
  \command{git diff}
  \vspace{0.5em}

  \keyword{Expect}\\
  A so called \emph{diff}.
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- diff}

\begin{verbatim}
$ git diff
\end{verbatim}
\pause{}
\vspace{-2.4ex}
{
\color{gray}
\begin{Verbatim}[commandchars=\\\{\}]
diff --git a/my_file.py b/my_file.py
index a40ce22..ea7235e 100644
--- a/my_file.py
+++ b/my_file.py
\end{Verbatim}
}
\pause{}
\begin{Verbatim}[commandchars=\\\{\}]
@@ -1,5 +1,5 @@
 def main():
\textcolor{red}{-    print("Hello World")}
\textcolor{blue}{+    print("Hello World!")}
 
 if __name__ == "__main__":
     main()
\end{Verbatim}
\end{frame}

\begin{frame}
  \frametitle{Commands for information -- log}

  \keyword{When}\\
  You want to see an overview of what's changed over time.
  \vspace{0.5em}

  \keyword{How}\\
  \command{git log}

  \command{git log <branch>}
  \vspace{0.5em}

  \keyword{Expect}\\
  The log.
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- log}
\begin{Verbatim}
$ git add my_file.py
$ git commit
$ git log
\end{Verbatim}
\pause{}
\vspace{-1.2ex} % this spacing can heck off
\begin{Verbatim}
commit 4582c8c2c41d6c7c46bab45d1aae807afacc357e
Author: Kodapan <kodapan@lithekod.se>
Date:   Fri Jan 22 17:48:27 2021 +0100

    add proper punctutation

commit 8e94d9e8bb33496484c80eaff68541dc0b8cccbc
Author: Kodapan <kodapan@lithekod.se>
Date:   Fri Jan 22 17:43:14 2021 +0100

    my first commit
\end{Verbatim}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- log \texttt{--}graph}
\begin{Verbatim}[commandchars=\\\{\}]


$ git log --graph
* commit 4582c8c2c41d6c7c46bab45d1aae807afacc357e
| Author: Kodapan <kodapan@lithekod.se>
| Date:   Fri Jan 22 17:48:27 2021 +0100
| 
|     add proper punctuation
| 
* commit 8e94d9e8bb33496484c80eaff68541dc0b8cccbc
  Author: Kodapan <kodapan@lithekod.se>
  Date:   Fri Jan 22 17:43:14 2021 +0100
  
      my first commit
\end{Verbatim}
\end{frame}

\begin{frame}
  \frametitle{Commands for information -- show}

  \keyword{When}\\
  You want more information about a specific commit.
  \vspace{0.5em}

  \keyword{How}\\
  \command{git show <commit>}
  \vspace{0.5em}

  \keyword{Expect}\\
  Log message and diff output for the commit.
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- show}
\begin{Verbatim}[commandchars=\\\{\}]


$ git log --graph
* commit 4582c8c2c41d6c7c46bab45d1aae807afacc357e
| Author: Kodapan <kodapan@lithekod.se>
| Date:   Fri Jan 22 17:48:27 2021 +0100
| 
|     add proper punctuation
| 
* commit 8e94d9e8bb33496484c80eaff68541dc0b8cccbc
  Author: Kodapan <kodapan@lithekod.se>
  Date:   Fri Jan 22 17:43:14 2021 +0100
  
      my first commit
\end{Verbatim}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- show}
\begin{Verbatim}[commandchars=\\\{\}]


$ git log --graph
* commit \textcolor{red}{4582}c8c2c41d6c7c46bab45d1aae807afacc357e
| Author: Kodapan <kodapan@lithekod.se>
| Date:   Fri Jan 22 17:48:27 2021 +0100
| 
|     add proper punctuation
| 
* commit 8e94d9e8bb33496484c80eaff68541dc0b8cccbc
  Author: Kodapan <kodapan@lithekod.se>
  Date:   Fri Jan 22 17:43:14 2021 +0100
  
      my first commit
\end{Verbatim}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Commands for information -- show}
\begin{Verbatim}[commandchars=\\\{\}]
$ git show \textcolor{red}{4582}
\end{Verbatim}
\pause{}
\vspace{-2.5ex}
\begin{verbatim}
commit 4582c8c2c41d6c7c46bab45d1aae807afacc357e
Author: Kodapan <kodapan@lithekod.se>
Date:   Fri Jan 22 17:48:27 2021 +0100
\end{verbatim}
\vspace{-3ex}
\begin{verbatim}
    add proper punctutation
\end{verbatim}
\vspace{-2ex}
\begin{Verbatim}[commandchars=\\\{\}]
diff --git a/my_file.py b/my_file.py
index a40ce22..ea7235e 100644
--- a/my_file.py
+++ b/my_file.py
@@ -1,5 +1,5 @@
 def main():
\textcolor{red}{-    print("Hello World")}
\textcolor{blue}{+    print("Hello World!")}
...
\end{Verbatim}
\end{frame}

\subsection{Branching out}

% Erik
\begin{frame}[fragile]
  \frametitle{Branching out}

  \begin{tabular}{ll}
    \command{git checkout} & Jump to a branch! \\
    \command{git branch} & Manage branches! \\
    \command{git log} & Find commits to jump to! \\
  \end{tabular}

\end{frame}

\begin{frame}
  \frametitle{Branching out -- checkout}

    \keyword{When} \\
    \command{git checkout} - The sonic screwdriver of git. Gets stuff from somewhere else. \\[1em]

    \keyword{How} \\
    \begin{tabular}{ll}
        \command{git checkout mybranch} & Jump to branches \\
        \command{git checkout -b newbranch} & Create branches \\
        \command{git checkout -- file.txt} & Undo changes \\
    \end{tabular}

    \keyword{Expect} \\
    Silence.

\end{frame}

\begin{frame}
  \frametitle{Branching out -- branch}

    \keyword{When} \\
    \command{git branch} - Show and manage branches \\[1em]

    \keyword{How} \\
    \vspace{-2ex}
    \begin{tabular}{ll}
        \command{git branch} & Show which branches exist \\ 
        \command{git branch newbranch} & Create branches \\
        \command{git branch -d mergedbranch} & Delete branches \\
    \end{tabular}

    \keyword{Expect} \\
    Silence.
\end{frame}

\begin{frame}
  \frametitle{Branching out -- log (again!)}

    Using \texttt{git log} it is possible to travel in time and reminisce. \\[1em]

    \only<1>{\command{git checkout <hash>}}
    \only<2->{\command{git checkout 479ad80ddf}} \\[3em]

    \pause[3]

    \alert{Watch out! This puts you in 'Detached HEAD state'} \\[1em]

    \pause

    \texttt{"git checkout -"} Puts you back where you were.

\end{frame}

\subsection{Branching in}

\begin{frame}[fragile]
  \frametitle{Branching in}

  \begin{tabular}{ll}
    \command{git merge} & I want both this and that! \\
    \command{git pull} & I want \emph{your} stuff! \\
  \end{tabular} \\ [3em]

  For lonely nights when you want some company.

\end{frame}

\begin{frame}
  \frametitle{Branching in -- merge} % #1

    \keyword{When} \\
    Combine two or more branches into one! \\[1em]

    \keyword{How} \\
    \command{git merge featurebranch} \hspace{1em} When two becomes one \\[3em]

    \pause
    \keyword{Expect} \\
    This may result in a so called ``\alert{merge conflict}" \\[1em]

    Again, \emph{don't panic}!
\end{frame}

\begin{frame}
  \frametitle{PANIK!}

    \begin{center}
        \Huge \alert{PANIK PANIK PANIK PANIK PANIK}
    \end{center}
\end{frame}

\begin{frame}
  \frametitle{Branching in -- merge} % #2

    Resolving a merge conflict \\[1em]

    \only<1>{
        \texttt{<<<<<<< HEAD} \\
        \texttt{cool feature} \\
        \texttt{=======} \\
        \texttt{not as cool feature} \\
        \texttt{cool feature} \\
        \texttt{coolest feature} \\
        \texttt{>>>>>>> featurebranch}
    }

    \only<2>{
        \alert{\texttt{<<<<<<< HEAD}} \\
        \alert{\texttt{cool feature}} \\
        \alert{\texttt{=======}} \\
        \texttt{not as cool feature} \\
        \texttt{cool feature} \\
        \texttt{coolest feature} \\
        \alert{\texttt{>>>>>>> featurebranch}}
    }

    \only<3>{
        \texttt{not as cool feature} \\
        \texttt{cool feature} \\
        \texttt{coolest feature} \\[1em]
        Done! Save, \texttt{add}, \texttt{commit} and then \texttt{push} to
        resolve the conflict!
    }
\end{frame}

\begin{frame}
  \frametitle{Branching in -- pull}
    \keyword{When}\\
    Get the latest changes from the upstream! When you get the nagging feeling
    that something is wrong. \\[1em]

    \keyword{How}\\
    \command{git pull} \\[3em]

    \pause

    \keyword{Expect}\\
    This may also result in \alert{merge conflicts}. \\[1em]
\end{frame}

%%% Working with others

% Pause? 5-10 minutes

\section{Working with others}
\subsection{Creating your first Merge Request}

\begin{frame}[fragile]
  \frametitle{Creating your first Merge Request}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Creating your first Merge Request -- Creating your branch}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Creating your first Merge Request -- Doing your thing}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Creating your first Merge Request -- Pushing your branch}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Creating your first Merge Request -- Asking for feedback}
\end{frame}

\subsection{Reading your first Merge Request}

\begin{frame}[fragile]
  \frametitle{Reading your first Merge Request}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Reading your first Merge Request -- Getting their changes}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Reading your first Merge Request -- Testing their changes}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Reading your first Merge Request -- Reviewing their changes}  % maybe two slides
\end{frame}

\subsection{Project management}

\begin{frame}[fragile]
  \frametitle{Project management}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Project management -- Commit messages}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Project management -- Tags}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Project management -- git $\sim$flow$\sim$}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Project management -- CI} % not always needed etc
\end{frame}

\begin{frame}[fragile]
  \frametitle{Project management -- gitignore}
\end{frame}

\section{Final stretch}
\subsection{Advanced commands}

\begin{frame}[fragile]
  \frametitle{Some more commands (bonus round)}
  These commands can be scary and confusing, and hard to `undo'. Worth a google if you
  want to get more use out of git.
  \vspace{1em}
  
  \command{git worktree} -- Looking at other branches \\
  \command{git cherry-pick} -- Stealing commits \\
  \command{git stash} -- WIP commits \\
    
\end{frame}

\subsection{Finding help}

\begin{frame}[fragile]
  \frametitle{Finding help}

  Human contact \\
  \hspace{1em} LiTHe kod meetups -- tusedays 17:15-late,  \\
  \vspace{1em}

  In your terminal at your fingetips \\
  \hspace{1em} \command{man git} -- Exhaustive, good if you know what you want \\
  \hspace{1em} \command{man giteveryday} -- Short description of commands \\
  \hspace{1em} \command{man gittutorial} -- A guide for getting started \\
  \hspace{1em} \command{man git commit} -- Exhaustive information about the `commit' subcommand\\
  \vspace{1em}

  From the web, just a GET away \\
  \hspace{1em} \url{git-scm.com/doc} -- Links and reference manual \\
  \hspace{1em} \url{lithekod.se/gitcheatsheet/} -- LiTHe kods cheat-sheet \\
  \hspace{1em} \url{shorturl.at/jpCDQ} -- GitHub's cheat-sheet \\
  \hspace{1em} \url{shorturl.at/tuLO3} -- Flowchart by Justin Hileman for messes\\
  %TODO meetups

\end{frame}

\end{document}
